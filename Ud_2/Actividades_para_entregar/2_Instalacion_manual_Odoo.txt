
1º Conectamos con la máquina mediante ssh:

	$ ssh root@192.168.3.58

	* Al conectar con root ya tenemos todos los permisos, pero si accedieramos con otro usuario habria que otorgarnos permisos temporales escribiendo sudo delante de cada comando

2º Instalamos las depencias que vamos a necesitar para instalar Odoo con:

	$ apt-get -yq install adduser postgresql-client python-dateutil python-docutils python-feedparser python-jinja2 python-ldap python-libxslt1 python-lxml python-mako python-mock python-openid python-psycopg2 python-psutil python-pybabel python-pychart python-pydot python-pyparsing python-reportlab python-simplejson python-tz python-unittest2 python-vatnumber python-vobject python-webdav python-werkzeug python-xlwt python-yaml python-zsi poppler-utils python-pip python-pypdf python-passlib python-decorator gcc python-dev libxml2-dev libxslt-dev libsasl2-dev libldap2-dev libssl-dev libpq-dev libjpeg-dev libjpeg8-dev python-setuptools python-markupsafe python-reportlab-accel python-zsi python-yaml python-argparse python-openssl python-egenix-mxdatetime python-usb python-serial lptools make python-pydot python-psutil python-paramiko poppler-utils python-pdftools antiword python-requests python-xlsxwriter python-suds python-software-properties

---CAPTURA 1---

3º Instalamos el siguiente paquete para realizar informes el pdf desde Odoo:
	$ apt-get update

	$ wget https://github.com/wkhtmltopdf/wkhtmltopdf/releases/download/0.12.1/wkhtmltox-0.12.1_linux-trusty-amd64.deb

---CAPTURA 2---

	* No es la linea que aparece en los apuntes (es la de la parte de instalacion automatica)

	Desempaquetamos e indicamos que instale el paquete:

	$ dpkg -i wkhtmltox-0.12.1_linux-trusty-amd64.deb

4º Si hay problemas de dependencias como es mi caso las instalamos y volvemos a intentar la instalacion del paquete anterior

	$ apt-get install fontconfig libjpeg-turbo8

	$ dpkg -i wkhtmltox-0.12.1_linux-trusty-amd64.deb

---CAPTURA 3---

5º Para que funcione correctamente el servidor web es necesario instalar npm:

	$ apt-get -yq install npm

---CAPTURA 4---

	Creamos el enlace con:

	$ ln -s /usr/bin/nodejs /usr/bin/node

	Intalamos less desde npm:

	$ npm install -g less less-plugin-clean-css

---CAPTURA 5---

6º Instalamos pip ya que lo vamos a necesitar en  el siguiente paso:

	$ apt-get install python3-pip python-pip

---CAPTURA 6---

7º Para no tener problemas con el procesamiento de imagenes al instalar datos demo, instalamos el paquete python de Pillow:

	$ pip install --no-cache-dir -I pillow

---CAPTURA 7---

	*En mi caso propone actualizar pip con:

	$ pip install --upgrade pip

---CAPTURA 8---

##### INSTANTANEA INSTALACION_ODOO_MANUAL #####

9º Instalacion de Postgres

	$ apt-get install postgresql

---CAPTURA 9 Y 10---

	Dar contraseña al usuario postgres que se ha creado durante la instalaion:

	$ passwd postgres

---CAPTURA 11---

10º Creacion usuario odoo en la base de datos postgres. Cambiamos al usuario postgres que se acaba de crear en la instalacion:

	$ sudo su postgres

Creamos el usuario:

	$ createuser -P -s -e odoo

	* Argumentos: (-P) Preguntar contraseña, (-s) permiso crear bases de datos, (-e) mostrar resultado operacion

---CAPTURA 12---



11º Creacion usuario odoo en el sistema.

	$ su root

	$ sudo adduser odoo

---CAPTURA 13---

12º Instalar git y descargar el codigo de Odoo:

	$ sudo apt-get install git

	$ su odoo

Cambiamos de directorio para que descargue el repositorio en la carpeta home de odoo

	$ cd ~

	$ git clone https://github.com/Odoo/odoo.git --depth 1 --branch 10.0 --single-branch odoo

	** Importantisimo: se indica la rama 10 y se tendra  que clonar siempre esta rama porque hay otras ramas desarrollandose simultaneamente y si no indicamos nada descarga la ultima (11)

---CAPTURA 14---

13º Instalar requisitos de python que aparecen en la documentacion:

	$ su root

	$ pip install -r /home/odoo/odoo/requirements.txt

---CAPTURA 15---

##### INSTANTANEA PRE-CONFIGURACION #####

14º Crear el archivo de configuracion para que lea los parametros que necesita al ejecutarse sin que tengamos que pasarlos nosotros.

	$ su odoo

	$ nano ~/odoo-server.conf

	* La ruta del archivo debe ser: /home/odoo/odoo-server.conf

Rellenamos el archivo con la siguiente informacion:

[options]
admin_passwd = admin
xmlrpc = True
xmlrpc_port = 8069
db_host = 127.0.0.1
db_port = 5432
db_user = odoo
db_password = odoo
logfile=/home/odoo/odoo-server.log
addons_path = /home/odoo/odoo/addons

---CAPTURA 16---

15º Configurar Odoo para que arranque al inicio.

	Crear el archivo /etc/systemd/system/odoo10.service:

	$ su root

	$ nano /etc/systemd/system/odoo10.service

Para indicarle el archivo que tiene que ejecutar y el usuario con que lo hace:

[Unit]
Description=Odoo
[Service]
Type=simple
User=odoo
ExecStart=/home/odoo/odoo/odoo-bin -c /home/odoo/odoo-server.conf
[Install]
WantedBy=default.target

** Todos los servicios se tienen que crear desde root para que tengan permiso de ejecucion, aunque el servicio una vez arrancado se indica que sea propiedad de el usuario ooo

---CAPTURA 17---

16º Habilitar el servicio para que se arranque al inicio:

	$ sudo systemctl enable odoo10.service

---CAPTURA 18---

17º Por ultimo probamos a arrancar y parar el servicio manualmente con:

	$ sudo systemctl start odoo10.service
	$ sudo systemctl stop odoo10.service


##### INSTANTANEA TERMINADA #####

18º Reiniciando la máquina el servicio se inicia solo, podemos cerrar el terminal y trabajar desde el navegador en http://192.168.3.58:8069

19º Si quisieramos simplemente iniciar Odoo como proceso y no como servicio ejecutamos el comando

	$ /home/odoo/odoo/odoo-bin -c /home/odoo/odoo-server.conf
